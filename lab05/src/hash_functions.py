"""Реализация хэш-функций."""


def simple_hash(key: str, table_size: int) -> int:
    """
    Простая хеш-функция: сумма кодов символов.

    Особенности:
        - Очень быстрая - только сложение и взятие остатка
        - Не учитывает порядок символов ("ab" и "ba" дают одинаковый хеш)
        - Высокая вероятность коллизий для анаграмм и перестановок

    Качество распределения: Низкое
    """
    return sum(ord(char) for char in key) % table_size


def polynomial_hash(key: str, table_size: int, base: int = 31) -> int:
    """
    Полиномиальная хеш-функция.

    Особенности:
        - Учитывает порядок символов - анаграммы дают разные хеши
        - Чувствительна к длине строки - длинные строки лучше распределяются
        - Медленнее простой функции из-за операции умножения

    Качество распределения: Среднее/Высокое
    """
    hash_value = 0
    for char in key:
        hash_value = (hash_value * base + ord(char)) % table_size
    return hash_value


def djb2_hash(key: str, table_size: int) -> int:
    """
    Хеш-функция DJB2.

    Особенности:
        - Отличное равномерное распределение - мало коллизий
        - Хорошо работает со строками разной длины

    Качество распределения: Очень высокое
    """
    hash_value = 5381
    for char in key:
        hash_value = ((hash_value << 5) + hash_value) + ord(char)
    return hash_value % table_size
